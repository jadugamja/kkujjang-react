"use strict";(self.webpackChunkkkujjang=self.webpackChunkkkujjang||[]).push([[52],{52:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(4519),n=s(2322),r=s(3908),c=s(2674),u=s(3426),l=s(6628),o=s(8414),i=s(2556);const d=()=>{const e=new URL(window.location.href).searchParams.get("code"),t=(0,a.useRef)(!1),s=(0,n.Zl)(l.E),[d,f]=(0,a.useState)({method:"get",url:`/user/oauth/kakao?code=${e}`}),{response:y,error:g,loading:k,fetchData:h}=(0,u.Z)(d,!1),[v,p]=(0,r.Z)(["sessionId"]),w=(0,c.s0)();(0,a.useEffect)((()=>{h()}),[d]),(0,a.useEffect)((()=>{if(null!==y){const e=100===y.authorityLevel?"admin":"member",s=new Date;s.setTime(s.getTime()+72e5),p("sessionId",y.sessionId,{path:"/",expires:s}),p("userRole",e,{path:"/",expires:s}),t.current||m(),w("/")}else g&&w("/member/login")}),[y,g]);const m=(0,a.useCallback)((async()=>{const e=await(0,o.wJ)();if(null!==e){p("userId",e.nickname.split("#")[1],{path:"/"});const a={role:v.userRole,...e};s(a),t.current=!0}}),[]);return(0,i.jsx)("div",{children:"\uce74\uce74\uc624 \ub85c\uadf8\uc778 \uc911..."})}},3426:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(4519),n=s(9191),r=s(1857);const c=n.Z.create({baseURL:r._n}),u=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=(0,a.useRef)(!1),[n,r]=(0,a.useState)(null),[u,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(!1),d=(0,a.useCallback)((async()=>{i(!0),l("");try{const t=await c.request(e);r(t.data)}catch(u){var t;l(null===(t=u.response)||void 0===t?void 0:t.data.error)}finally{i(!1)}}),[e]);return(0,a.useEffect)((()=>{s.current||t&&(d(),s.current=!0)}),[t]),{response:n,error:u,loading:o,fetchData:d}}},6628:(e,t,s)=>{s.d(t,{E:()=>n,XI:()=>u,fZ:()=>r,fg:()=>l,gs:()=>o,ls:()=>c});var a=s(2322);const n=(0,a.cn)({key:"userInfoState",default:null}),r=((0,a.nZ)({key:"avatarUrlState",get:e=>{let{get:t}=e;const s=t(n);return null===s||void 0===s?void 0:s.avatarUrl}}),(0,a.cn)({key:"isActiveAccountState",default:!0})),c=(0,a.cn)({key:"waitingPlayerListState",default:[]}),u=((0,a.cn)({key:"waitingPlayerState",default:{isReady:!1,isHost:!0}}),(0,a.cn)({key:"playingPlayerListState",default:[]})),l=(0,a.cn)({key:"playingPlayerState",default:{myTurn:!1,score:0}}),o=(0,a.nZ)({key:"syncPlayingPlayerToListState",get:e=>{let{get:t}=e;const s=t(u),a=t(l);return s.map((e=>e.id===a.id?a:e))},set:(e,t)=>{let{set:s}=e;s(u,t)}})},8414:(e,t,s)=>{s.d(t,{$u:()=>l,Yt:()=>o,wJ:()=>u});var a=s(9191),n=s(7239),r=s(1857);const c=new n.Z,u=async()=>{const e=await a.Z.get("".concat(r._n,"/user/me"),{headers:{sessionId:c.get("sessionId")}});return"OK"===e.statusText?e.data.result:null},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\ud14c\uc2a4\ud2b8";return"OK"===(await a.Z.put("".concat(r._n,"/user"),{avatarAccessoryIndex:e,nickname:t},{headers:{sessionId:c.get("sessionId")}})).statusText},o=async e=>{const t=await a.Z.get("".concat(r._n,"/user/").concat(e),{headers:{sessionId:c.get("sessionId")}});return"OK"===t.statusText?t.data.result:null}}}]);
//# sourceMappingURL=52.10d045f6.chunk.js.map